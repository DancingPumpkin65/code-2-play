<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Dashboard - Duolingo Style</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #131f24; /* Updated from dsdsds.txt */
            --primary-text: #FFFFFF; /* Updated from dsdsds.txt */
            --secondary-text: #A0A0A0; /* Keeping for now, might need adjustment */
            --accent-green: #58cc02; /* Updated 'botton color' from dsdsds.txt */
            --accent-yellow: #ffc700; /* Updated 'golden button color' from dsdsds.txt */
            --accent-blue: #3f9eca; /* From 'left navbar life learn' in dsdsds.txt - for active learn */
            --locked-gray: #4A5568; /* Adjusted for new theme */
            --panel-bg: #1A202C; /* Adjusted for new theme - slightly darker than bg */
            --font-family: "Nunito", sans-serif;
            --base-font-size: 16px;
            --border-radius: 12px;
            --spacing-unit: 4px;
        }

        body {
            margin: 0;
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--primary-text);
            font-size: var(--base-font-size);
            display: flex;
            justify-content: center;
            padding: calc(var(--spacing-unit) * 4); /* 16px */
            box-sizing: border-box;
            min-height: 100vh;
        }

        .grid-page {
            display: grid;
            grid-template-columns: 240px 1fr 300px; /* Keep existing layout for now */
            gap: calc(var(--spacing-unit) * 4); /* 16px */
            width: 100%;
            max-width: 1400px; 
        }

        /* Left Sidebar Navigation */
        .left-sidebar {
            display: flex;
            flex-direction: column;
            gap: calc(var(--spacing-unit) * 2); /* 8px */
        }
        
        /* Duolingo's logo structure from dsdsds.txt */
        ._3vxyy { /* Duolingo logo container */
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
        }
        ._3qEOY img.sOuBs { /* Main logo part */
            height: 29px; /* From Duolingo's CSS for their logo */
            width: auto;
        }
         ._3qEOY img._1C091 { /* Smaller logo part, if needed */
            display: none; /* Hide if not used or style as per Duolingo */
        }


        .left-sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        /* Adapting .nav-item to Duolingo's structure from dsdsds.txt */
        .nav-item { /* Corresponds to _2dvyl in Duolingo structure */
            display: flex;
            align-items: center;
            height: 48px;
            padding: 0 calc(var(--spacing-unit) * 4); 
            cursor: pointer;
            border-radius: var(--border-radius);
            transition: background-color 0.2s ease, color 0.2s ease;
            gap: calc(var(--spacing-unit) * 3); 
            color: var(--secondary-text); 
        }
        .nav-item-icon-img { /* For img used as icon */
            width: 24px; /* Adjust as needed */
            height: 24px; /* Adjust as needed */
        }
        .nav-item-label { /* Corresponds to _1AZJt */
            font-weight: 700; /* Duolingo uses bolder font for nav items */
            font-size: 15px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.08); /* Slightly lighter hover */
            color: var(--primary-text);
        }

        .nav-item.active {
            background: var(--panel-bg); /* A subtle background for active */
            color: var(--accent-green); /* Use the main button color for active text */
            border-left: 3px solid var(--accent-green);
        }
         .nav-item.active.learn-active { /* Specific for 'Learn' item if active */
            background: var(--accent-blue); /* Color from dsdsds.txt for active learn */
            color: var(--primary-text);
            border-left-color: var(--primary-text);
        }
        .nav-item.active .nav-item-icon-img {
            filter: brightness(0) saturate(100%) invert(68%) sepia(68%) saturate(636%) hue-rotate(86deg) brightness(101%) contrast(91%); /* Makes icon --accent-green */
        }
        .nav-item.active.learn-active .nav-item-icon-img {
             filter: brightness(0) invert(1); /* Makes icon white for learn-active */
        }


        /* Center Column */
        .dashboard-container {
            display: flex;
            flex-wrap: wrap; /* Allow wrapping for responsiveness */
            width: 100%;
            max-width: 1200px; /* Adjusted max-width */
            gap: 20px; /* Adjusted gap */
        }

        .sidebar {
            padding: 15px;
            background-color: #3b4a69; /* Slightly lighter dark slate blue */
            border-radius: 12px;
            /* box-shadow: 0 2px 8px rgba(0,0,0,0.15); */ /* Softer shadow */
        }

        .left-sidebar {
            flex: 0 0 200px; /* Adjusted width */
            display: flex;
            flex-direction: column;
            background-color: transparent; /* Left sidebar itself is transparent, nav items have bg */
            box-shadow: none;
            padding: 0;
        }

        .logo {
            font-size: 26px;
            font-weight: bold;
            color: #58cc02; /* Duolingo green */
            margin-bottom: 20px;
            text-align: left; /* Align to left */
            padding: 10px 15px;
        }

        .left-sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .left-sidebar nav li a {
            display: flex;
            align-items: center;
            gap: 12px; /* Increased gap */
            padding: 10px 15px;
            color: #b0b8c5; /* Lighter gray for text */
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 5px;
            font-weight: 700; /* Bolder font */
            transition: background-color 0.2s ease, color 0.2s ease;
            font-size: 15px;
        }

        .left-sidebar nav li a:hover, .left-sidebar nav li a:focus {
            background-color: #4a5a7f; /* Hover state */
            color: #ffffff;
            outline: none;
        }

        .left-sidebar nav li a.active {
            background-color: #2f3c57; /* Active state matches main bg or slightly darker */
            color: #7edc3c; /* Brighter green for active text */
            font-weight: 700;
            border: 2px solid #4a5a7f; /* Border for active item */
        }
        .left-sidebar nav li a.active:hover, .left-sidebar nav li a.active:focus {
            background-color: #354360;
        }


        .center-content {
            flex: 1;
            min-width: 300px; /* Ensure it doesn't get too squished */
            padding: 0;
        }

        .center-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 12px 15px;
            background-color: #58cc02; /* Bright green like image */
            border-radius: 12px;
            color: #ffffff; /* White text on green bg */
        }

        .center-header-title {
            color: #ffffff; /* White text */
            font-size: 16px; /* Adjusted size */
            font-weight: bold;
        }
        .center-header-title .arrow { /* For the back arrow */
            margin-right: 8px;
            font-weight: normal;
        }


        .guidebook-btn {
            background-color: #4caf50; /* Slightly darker green than header */
            color: #ffffff;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: background-color 0.2s ease;
            box-shadow: 0 2px 3px rgba(0,0,0,0.2);
            border-bottom: 2px solid #388e3c; /* Duolingo button style */
        }
        .guidebook-btn:hover, .guidebook-btn:focus {
            background-color: #43a047;
            outline: none;
        }
        .guidebook-btn:active {
            background-color: #388e3c;
            transform: translateY(1px);
            box-shadow: none;
        }

        .level-path {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px; /* Adjusted gap */
        }

        .level-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .level-icon-wrapper {
            position: relative;
            margin-bottom: 5px; /* Reduced margin */
        }
        
        .level-icon {
            width: 60px; /* Adjusted size */
            height: 60px; /* Adjusted size */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px; /* Adjusted icon font size */
            font-weight: bold;
            border: 3px solid transparent;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative; /* For pseudo-elements if needed */
        }

        .level-icon.locked {
            background-color: #777777; /* Muted gray from image */
            color: #ababab;
            border-color: #5c5c5c;
        }
        .level-icon.locked:after { /* Inner shadow effect for locked */
            content: '';
            position: absolute;
            top: 5px; left: 5px; right: 5px; bottom: 5px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.3) 100%);
        }


        .level-icon.unlocked { /* For the book icon */
            background-color: #ffc800; /* Gold/Yellow from image */
            color: #5c3d00; /* Darker text for contrast */
            border-color: #e6b400;
            box-shadow: 0 2px 0 #e6b400; /* Bottom border */
        }
        .level-icon.unlocked:hover {
            transform: translateY(-2px);
        }


        .level-icon.completed {
            background-color: #58cc02; /* Bright green */
            color: #ffffff;
            border-color: #4aa502;
            box-shadow: 0 2px 0 #4aa502; /* Bottom border */
        }
         .level-icon.completed:hover {
            transform: translateY(-2px);
        }


        .level-icon.current { /* The "START" button */
            background-color: #58cc02; /* Green like image */
            color: #ffffff; /* White star */
            border: 4px solid #ffffff; /* Thick white border */
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(88, 204, 2, 0.7), 0 4px 0 #388e3c; /* Glow and bottom border */
            font-size: 28px; /* Larger star */
        }
        .level-icon.current .level-text { 
            display: none; /* Hide START text, use icon */
        }


        .level-label {
            font-size: 12px; /* Smaller label */
            color: #bdc4d0;
            margin-top: 3px;
            font-weight: 600;
        }
        
        .mascot {
            width: 60px; 
            height: 60px;
            font-size: 45px; 
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            left: 100%; /* Position to the right of the icon */
            top: 50%;
            transform: translate(15px, -50%); /* Adjust spacing */
        }


        .right-sidebar {
            flex: 0 0 280px; /* Adjusted width */
            display: flex;
            flex-direction: column;
            gap: 15px; /* Adjusted gap */
            background-color: transparent; /* Right sidebar itself is transparent */
            box-shadow: none;
            padding: 0;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #3b4a69; /* Consistent panel background */
            padding: 10px;
            border-radius: 12px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #c0c8d4;
        }
        .stat-item .stat-icon { font-size: 18px; }
        .stat-item .flag-icon { font-size: 22px; border-radius: 50%; } 
        .stat-item-value { font-weight: bold; color: #fff; }
        /* Specific colors for stat icons based on image */
        .stat-item .streak-icon { color: #ff9800; } /* Orange */
        .stat-item .xp-icon { color: #1e90ff; } /* Blue (like gems) */
        .stat-item .hearts-icon { color: #ff4b4b; } /* Red */


        .super-callout, .league-box, .quests-panel {
            background-color: #3b4a69; /* Consistent panel background */
            padding: 15px;
            border-radius: 12px;
        }

        .super-callout {
            text-align: center;
            border-top: 3px solid #7b1fa2; /* Purple from image */
        }
        .super-callout-icon { /* Rainbow owl from image */
            width: 50px;
            height: 50px;
            background: conic-gradient(red, orange, yellow, green, blue, indigo, violet, red);
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 28px; /* For owl emoji if used as fallback */
            color: white; /* Fallback color */
            margin-bottom: 8px;
            /* Ideally an SVG or image here */
        }
        .super-callout h3 {
            color: #ffffff;
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 17px;
        }
        .super-callout p {
            font-size: 13px;
            color: #bdc4d0;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        .super-btn {
            background-color: var(--accent-green); /* Main button color */
            color: #FFFFFF;
            padding: calc(var(--spacing-unit) * 2.5) calc(var(--spacing-unit) * 5); 
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: background-color 0.2s ease;
            display: block;
            width: 100%;
            box-shadow: 0 2px 0 #4aa502; /* Was darken(var(--accent-green), 10%) */
        }
        .super-btn:hover {
            background-color: #6ae002; /* Was lighten(var(--accent-green), 5%) */
        }
         .super-btn:active {
            background-color: #50bb02; /* Was darken(var(--accent-green), 5%) */
        }
        
        /* League Card */
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .panel-header h4 {
            margin: 0;
            font-size: 16px; /* Adjusted size */
            color: #ffffff;
            font-weight: 700;
        }
        .view-link {
            font-size: 12px;
            color: #7edc3c; /* Brighter green */
            text-decoration: none;
            font-weight: bold;
        }
        .view-link:hover, .view-link:focus {
            text-decoration: underline;
            color: #9eff5e;
            outline: none;
        }

        .league-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }
        .league-icon { /* Emerald league icon from image */
            width: 40px;
            height: 40px;
            background-color: #2e7d32; /* Darker green for icon bg */
            color: #ffffff; /* White feather */
            border-radius: 8px; /* Hexagonal-like, but using rounded rect */
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 20px; /* For feather emoji */
            /* transform: rotate(45deg); */ /* Could make it diamond-like */
        }
        .league-details p {
            margin: 0;
            font-size: 13px;
            color: #bdc4d0;
        }
        .league-details .rank {
            font-weight: bold;
            color: #ffffff;
        }
        .league-status.danger {
            color: #ff6b6b; 
            font-size: 12px;
            font-weight: bold;
        }
        .league-status.safe {
            color: #7edc3c; 
            font-size: 12px;
            font-weight: bold;
        }


        .quest-item {
            margin-bottom: 12px;
        }
        .quest-item-text {
            font-size: 13px;
            color: #d0d8e0;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .quest-icon {
            font-size: 18px;
            color: #ffeb3b; /* Bright yellow for quest icons */
        }
        .progress-bar-container {
            background-color: #2f3c57; /* Darker than panel, matches main bg */
            border-radius: 20px; 
            height: 14px; /* Slightly thicker */
            overflow: hidden;
            width: 100%;
            border: 1px solid #4a5a7f; /* Border for definition */
        }
        .progress-bar {
            background-color: var(--accent-yellow); /* Golden color for progress */
            height: 100%;
            border-radius: 20px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 5px; /* Space for chest icon */
        }
        .progress-bar.completed {
            background-color: #58cc02; /* Duolingo green for completed quests */
        }
        .progress-bar-chest {
            font-size: 10px; /* Smaller chest */
            color: #8d6e63; /* Brownish chest */
        }
        .progress-bar.completed .progress-bar-chest {
            color: #4caf50; /* Greenish chest when complete */
        }

        .progress-bar-wrapper { /* For text overlay if needed */
            position: relative;
        }

        /* Responsive Design */
        @media (max-width: 992px) { /* Tablet and smaller */
            .left-sidebar {
                flex: 1 1 100%; /* Take full width */
                flex-direction: row; /* Horizontal nav for smaller screens */
                align-items: center;
                margin-bottom: 15px;
                padding: 0 10px; /* Add some padding */
            }
            .left-sidebar .logo {
                margin-bottom: 0;
                margin-right: auto; /* Push nav to the right */
            }
            .left-sidebar nav ul {
                display: flex;
                gap: 5px;
            }
            .left-sidebar nav li a {
                padding: 8px 10px;
                font-size: 14px;
                margin-bottom: 0;
            }
             .left-sidebar nav li a.active {
                border: none; /* Remove border for horizontal active */
                background-color: #4a5a7f;
             }


            .center-content {
                order: 2; /* Ensure center content comes after left sidebar if it wraps */
            }
            .right-sidebar {
                order: 3;
            }
        }

        @media (max-width: 768px) { /* Mobile */
            .dashboard-container {
                flex-direction: column;
                padding: 5px;
            }
            .left-sidebar, .center-content, .right-sidebar {
                flex: 1 1 auto; /* Allow them to grow and shrink naturally in column */
                width: 100%; /* Take full width */
            }
            .left-sidebar {
                flex-direction: column; /* Stack logo and nav vertically again */
                align-items: stretch;
            }
            .left-sidebar .logo {
                text-align: center;
                margin-bottom: 10px;
            }
            .left-sidebar nav ul {
                flex-direction: column; /* Stack nav items */
                align-items: stretch;
            }
            .left-sidebar nav li a {
                justify-content: center; /* Center nav text */
            }

            .center-header {
                padding: 10px;
                margin-bottom: 20px;
            }
            .center-header-title {
                font-size: 14px;
            }
            .guidebook-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
            .level-icon {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            .level-icon.current {
                font-size: 24px;
            }
            .mascot {
                width: 50px;
                height: 50px;
                font-size: 35px;
                transform: translate(10px, -50%);
            }
            .stats-bar { padding: 8px; }
            .stat-item { font-size: 12px; }
            .stat-item .stat-icon { font-size: 16px; }
            .stat-item .flag-icon { font-size: 20px; }

            .super-callout, .league-box, .quests-panel { padding: 12px; }
            .super-callout h3 { font-size: 16px; }
            .super-callout p { font-size: 12px; }
            .super-btn { font-size: 14px; padding: 8px 15px; }
            .panel-header h4 { font-size: 15px; }
            .league-icon { width: 35px; height: 35px; font-size: 18px; }
            .league-details p { font-size: 12px; }
            .quest-item-text { font-size: 12px; }
            .quest-icon { font-size: 16px; }
        }

    </style>
</head>
<body>
    <div class="grid-page">
        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <!-- Duolingo logo structure from dsdsds.txt -->
            <div class="_3vxyy">
                <a class="_3qEOY" href="/learn" aria-current="page" onclick="alert('Logo clicked! Return to Dashboard.'); return false;">
                    <img class="sOuBs" src="https://d35aaqx5ub95lt.cloudfront.net/vendor/70a4be81077a8037698067f583816ff9.svg" alt="CodeLingo">
                    <!-- <img class="_1C091" src="https://d35aaqx5ub95lt.cloudfront.net/vendor/0cecd302cf0bcd0f73d51768feff75fe.svg"> -->
                </a>
            </div>
            <nav>
                <ul id="nav-list">
                    <!-- Nav items will be populated by JS -->
                </ul>
            </nav>
        </aside>

        <!-- Center Column -->
        <main class="center-content">
            <div class="center-header">
                <!-- Data from JSON: section, unit, title -->
                <div class="center-header-title"><span class="arrow">‚Üê</span> SECTION <span id="section-num"></span>, UNIT <span id="unit-num"></span> ‚Äì <span id="lesson-title"></span></div>
                <button class="guidebook-btn"><span class="guidebook-btn-icon">üìñ</span> GUIDEBOOK</button>
            </div>

            <div class="level-path" id="level-path-container">
                <!-- Levels will be dynamically inserted here by script -->
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <div class="stats-bar sidebar-panel" id="stats-bar-container">
                <!-- Stats will be populated by JS -->
            </div>

            <!-- Super Promo - Using existing structure, colors updated via CSS vars -->
            <div class="super-callout" id="super-promo-container">
                 <!-- Content from dsdsds.txt (simplified) -->
                 <img height="20.620689655172413" src="https://d35aaqx5ub95lt.cloudfront.net/images/super/2e50c3e8358914df5285dc8cf45d0b4c.svg" width="78" alt="Super Logo">
                 <!-- <img class="zYUV0" src="https://d35aaqx5ub95lt.cloudfront.net/images/super/fb7130289a205fadd2e196b9cc866555.svg"> -->
                 <h3>Level up with Super</h3>
                 <p>No ads, personalized practice, and unlimited Legendary!</p>
                 <button class="super-btn" onclick="alert('Get Super clicked!')">Get Super</button>
            </div>

            <div class="league-box sidebar-panel" id="league-container">
                <!-- League info will be populated by JS -->
            </div>

            <div class="quests-panel sidebar-panel" id="quests-container">
                <!-- Quests will be populated by JS -->
            </div>
        </aside>
    </div>

    <script>
        const initialJsonData = {
            "section": 2,
            "unit": 10,
            "title": "Discuss train travel",
            // Updated navItems to include image URLs from dsdsds.txt
            "navItems": [
                { "id": "learn", "label": "Learn", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/784035717e2ff1d448c0f6cc4efc89fb.svg", "active": true },
                { "id": "practice", "label": "Practice", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/5187f6694476a769d4a4e28149867e3e.svg" },
                { "id": "leaderboards", "label": "Leaderboards", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/ca9178510134b4b0893dbac30b6670aa.svg" },
                { "id": "quests", "label": "Quests", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/7ef36bae3f9d68fc763d3451b5167836.svg" },
                { "id": "shop", "label": "Shop", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/0e58a94dda219766d98c7796b910beee.svg" },
                { "id": "profile", "label": "Profile", "iconUrl": "//simg-ssl.duolingo.com/ssr-avatars/1108740731/SSR-saZ-QTBgkc/medium" }, // Example profile image
                { "id": "more", "label": "More", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/7159c0b5d4250a5aea4f396d53f17f0c.svg" }
            ],
            "levels": [
                // ... (keep existing levels for now, zigzag will change this)
                { "type": "lesson", "status": "completed", "name": "Variables Intro" },
                { "type": "start", "status": "unlocked", "name": "Unit Overview" },
                { "type": "lesson", "status": "current", "name": "Loops & Logic" },
                { "type": "challenge", "status": "locked", "name": "Algorithm Challenge" },
                { "type": "lesson", "status": "locked", "name": "Functions Deep Dive" },
                { "type": "milestone", "status": "locked", "name": "Unit 2 Completion" }
            ],
            // Updated stats to include image URLs from dsdsds.txt
            "stats": {
                "locale": { "text": "DE", "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/vendor/87938207afff1598611ba626a8c4827c.svg" }, // German flag
                "streak": { "value": 36, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/icons/398e4298a3b39ce566050e5c041949ef.svg" },
                "xp": { "value": 755, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/gems/45c14e05be9c1af1d7d0b54c6eed7eee.svg" }, // Gems for XP
                "hearts": { "value": 5, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/hearts/8fdba477c56a8eeb23f0f7e67fdec6d9.svg" }
            },
            // Updated league to include image URLs from dsdsds.txt
            "league": { 
                "name": "Emerald League", 
                "rank": 20, 
                "inDanger": true,
                "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/leagues/f480e032c5222395e73dac88ce3592bb.svg", // Emerald league icon
                "rankIconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/leagues/c2e94251e2a2d71311d2f58c39413cb9.svg" // For rank display if needed
            },
            // Updated quests to include image URLs from dsdsds.txt
            "quests": [
                { "text": "Earn 10 XP", "progressCurrent": 10, "progressMax": 10, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/2b5a211d830a24fab92e291d50f65d1d.svg", "unlocked": true, "completedIconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/33af8ba58d22f3ea21279e9a84756833.svg" },
                { "text": "Complete 1 perfect lesson", "progressCurrent": 1, "progressMax": 1, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/39f13d2de304cad2ac2f88b31a7e2ff4.svg", "unlocked": true, "completedIconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/14bcd86b9686b58fb979d13c7f68baf9.svg" },
                { "text": "Earn 15 Combo Bonus XP", "progressCurrent": 7, "progressMax": 15, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/2b5a211d830a24fab92e291d50f65d1d.svg", "unlocked": true, "completedIconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/ca23da57929a3144934ee0571a2f44e9.svg" },
                { "text": "Unlock 3 new lessons", "progressCurrent": 0, "progressMax": 3, "iconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/2b5a211d830a24fab92e291d50f65d1d.svg", "unlocked": false, "completedIconUrl": "https://d35aaqx5ub95lt.cloudfront.net/images/goals/ca23da57929a3144934ee0571a2f44e9.svg" } // Placeholder completed icon
            ]
        };

        function renderPage(data) {
            // Populate Nav
            const navList = document.getElementById('nav-list');
            navList.innerHTML = ''; 
            data.navItems.forEach(item => {
                const li = document.createElement('li');
                li.className = 'nav-item'; 
                if (item.active) {
                    li.classList.add('active');
                    if (item.id === 'learn') {
                        li.classList.add('learn-active');
                    }
                }
                li.innerHTML = `
                    <img src="${item.iconUrl}" class="nav-item-icon-img" alt="${item.label} icon">
                    <span class="nav-item-label">${item.label}</span>
                `;
                li.onclick = () => {
                    data.navItems.forEach(i => i.active = (i.id === item.id));
                    renderPage(data); 
                    alert('Navigating to ' + item.label); // Corrected alert
                };
                navList.appendChild(li);
            });
            
            // Populate Header
            document.getElementById('section-num').textContent = data.section;
            document.getElementById('unit-num').textContent = data.unit;
            document.getElementById('lesson-title').textContent = data.title;

            // Populate Stats Bar (Right Sidebar)
            const statsBarContainer = document.getElementById('stats-bar-container');
            statsBarContainer.innerHTML = `
                <div class="stat-item">
                    <img src="${data.stats.locale.iconUrl}" class="stat-flag-img" alt="Locale flag">
                </div>
                <div class="stat-item">
                    <img src="${data.stats.streak.iconUrl}" class="stat-icon-img" alt="Streak icon">
                    <span class="stat-text">${data.stats.streak.value}</span>
                </div>
                <div class="stat-item">
                    <img src="${data.stats.xp.iconUrl}" class="stat-icon-img" alt="XP icon">
                    <span class="stat-text">${data.stats.xp.value}</span>
                </div>
                <div class="stat-item">
                    <img src="${data.stats.hearts.iconUrl}" class="stat-icon-img" alt="Hearts icon">
                    <span class="stat-text">${data.stats.hearts.value}</span>
                </div>
            `;
            // Add click handlers if needed, e.g., for streak
            statsBarContainer.querySelector('img[alt="Streak icon"]').parentElement.onclick = () => alert('Streak history modal!');


            // Populate Levels (Center Column) - Placeholder, Zigzag needs major rework
            const levelPathContainer = document.getElementById('level-path-container');
            levelPathContainer.innerHTML = ''; // Clear old levels
            data.levels.forEach((level, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'level-item';

                const nodeDiv = document.createElement('div');
                nodeDiv.className = 'level-node ' + level.status;
                nodeDiv.title = level.name; 

                let iconContent = '';
                switch(level.type) {
                    case 'start': iconContent = '‚≠ê'; break;
                    case 'lesson': iconContent = 'üìò'; break;
                    case 'challenge': iconContent = 'üèãÔ∏è'; break;
                    case 'milestone': iconContent = 'üóùÔ∏è'; break;
                    default: iconContent = '‚ùì';
                }
                if (level.status === 'completed') iconContent = '‚úì';
                
                nodeDiv.innerHTML = iconContent;
                
                if (level.status !== 'locked') {
                    nodeDiv.onclick = () => alert('Clicked on: ' + level.name); // Corrected alert
                }
                
                itemDiv.appendChild(nodeDiv);

                if (level.status === 'current') {
                    const mascotWrapper = document.createElement('div');
                    mascotWrapper.className = 'mascot-wrapper';
                    const mascotDiv = document.createElement('div');
                    mascotDiv.className = 'mascot';
                    mascotDiv.textContent = 'ü¶â'; 
                    mascotWrapper.appendChild(mascotDiv);
                    nodeDiv.appendChild(mascotWrapper); 
                }

                const labelDiv = document.createElement('div');
                labelDiv.className = 'level-label';
                labelDiv.textContent = level.name;
                itemDiv.appendChild(labelDiv);

                levelPathContainer.appendChild(itemDiv);

                if (index < data.levels.length - 1) {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'connecting-line';
                    levelPathContainer.appendChild(lineDiv);
                }
            });

            // Populate League Info (Right Sidebar)
            const leagueContainer = document.getElementById('league-container');
            leagueContainer.innerHTML = `
                <div class="panel-header">
                    <h4 class="panel-title">${data.league.name}</h4>
                    <a class="view-all-link" onclick="alert('View League clicked!')">VIEW LEAGUE</a>
                </div>
                <div class="league-body">
                    <div class="league-icon-container">
                        <img src="${data.league.iconUrl}" alt="${data.league.name} icon" style="width: 40px; height: auto;">
                        <!-- <span class="league-rank-badge">#${data.league.rank}</span> -->
                    </div>
                    <div class="league-details">
                        <p class="league-subtext">
                            You‚Äôre ranked <span>#${data.league.rank}</span><br>
                            <span style="color: ${data.league.inDanger ? '#E74C3C' : 'var(--accent-green)'}; font-weight: bold;">
                                ${data.league.inDanger ? 'You moved down to the demotion zone!' : "You\'re in a good position!"}
                            </span>
                        </p>
                    </div>
                </div>
            `; // Escaped apostrophe in "You're"
            
            // Populate Quests (Right Sidebar)
            const questsContainer = document.getElementById('quests-container');
            questsContainer.innerHTML = ''; // Clear old quests
            const questsHeader = document.createElement('div');
            questsHeader.className = 'panel-header';
            questsHeader.innerHTML = `
                <h4 class="panel-title">Daily Quests</h4>
                <a class="view-all-link" onclick="alert('View All Quests clicked!')">VIEW ALL</a>
            `;
            questsContainer.appendChild(questsHeader);

            const questsList = document.createElement('div');
            questsList.className = 'quests-list';
            data.quests.forEach(quest => {
                const questRow = document.createElement('div');
                questRow.className = 'quest-row';
                if (!quest.unlocked) {
                    questRow.style.opacity = '0.6';
                    questRow.style.pointerEvents = 'none';
                } else {
                    questRow.onclick = () => alert('Quest clicked: ' + quest.text + '. Show details + Go Practice CTA.'); // Corrected alert
                }

                const questIcon = document.createElement('img');
                questIcon.src = quest.iconUrl;
                questIcon.alt = "quest icon";
                questIcon.className = 'quest-icon';
                questIcon.style.width = '24px'; questIcon.style.height='24px';


                const questInfo = document.createElement('div');
                questInfo.className = 'quest-info';
                
                const questText = document.createElement('div');
                questText.className = 'quest-text';
                questText.textContent = quest.text;

                const progressBarContainer = document.createElement('div');
                progressBarContainer.className = 'progress-bar-container';
                
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                const percentage = (quest.progressCurrent / quest.progressMax) * 100;
                progressBar.style.width = percentage + '%';

                const progressBarText = document.createElement('span');
                progressBarText.className = 'progress-bar-text';
                if (percentage === 100) {
                    progressBarText.innerHTML = `<img src="${quest.completedIconUrl}" alt="completed" style="height: 16px;">`;
                } else {
                    progressBarText.textContent = `${quest.progressCurrent}/${quest.progressMax}`; // Corrected backslashes
                }
                progressBar.appendChild(progressBarText);
                
                progressBarContainer.appendChild(progressBar);
                questInfo.appendChild(questText);
                questInfo.appendChild(progressBarContainer);

                questRow.appendChild(questIcon);
                questRow.appendChild(questInfo);

                if (!quest.unlocked) {
                    const lockedBadge = document.createElement('span');
                    lockedBadge.className = 'quest-locked-badge';
                    lockedBadge.innerHTML = '<img src="https://d35aaqx5ub95lt.cloudfront.net/images/goals/ca23da57929a3144934ee0571a2f44e9.svg" alt="locked" style="width: 20px; height: 20px;">'; // Lock icon from dsdsds.txt (example)
                    questRow.appendChild(lockedBadge);
                }
                
                questsList.appendChild(questRow);
            });
            questsContainer.appendChild(questsList);
        }

        // Initial render
        renderPage(initialJsonData);

    </script>
</body>
</html>
